@using MasterProject.Models;
@using MasterProject.ViewModels;
@using System;
@using System.Linq;
@{
    ViewBag.Title = "EventRequests";
    LoginUser user = null;
    int month = int.Parse(DateTime.Now.Month.ToString());
    int day = int.Parse(DateTime.Now.Day.ToString());
    int currentLastDay = 0;
    switch (month)
    {
        case 2:
            currentLastDay = 28;
            break;
        case 4: case 6: case 9: case 11:
            currentLastDay = 30;
            break;
        case 1: case 3: case 5: case 7: case 8: case 10: case 12:
            currentLastDay = 31;
            break;
    }
    if (Session["User"] != null)
    {
        user = Session["User"] as LoginUser;
        if (user.IsWorker)
        {
            Layout = "~/Views/Share/ViewWorker.cshtml";
        }
        else
        {
            Layout = "~/Views/Share/View.cshtml";
        }
    }
    else
    {
        Layout = "~/Views/Share/View.cshtml";
    }
}
@model EventRequestViewModel
<link href="~/Content/Styles/Style-EventsRequest.css" rel="stylesheet" />
<script src="~/Content/Scripts/Events-Script.js"></script>
<div class="wrapper">
    <div class="personal-input">
        <form>
            @if (Session["User"] == null)
            {
                <div class="noneUserWrapper">
                    <small class="noneUser">בכדי להזמין אירוע צריך</small>
                    <a class="noneUserBtn" href="~/Wanted/Wanted">להירשם</a>
                    <small class="noneUser">ואו</small>
                    <small class="noneUserBtn" onclick="Focus()">להתחבר</small>
                </div>

                <label for="name">שם</label>
                <span class="span" id="errorName">צריך לכתוב רק אותיות</span>
                <span class="span" id="emptyName">צריך למלא</span>
                <input type="text" id="name" placeholder="השם שלך..." value="">

                <label for="tel">טלפון</label>
                <span class="span" id="errorTel">צריך לכתוב לפי התבנית</span>
                <span class="span" id="emptyTel">צריך למלא</span>
                <input type="tel" id="tel" placeholder="הטלפון שלך..." value="">
                <small>תבנית: 05X-XXX-XXXX, לא צריך את ה"-"</small><br><br>

                <label for="event">סוג האירוע</label>
                <span class="span" id="emptyEvent">צריך לבחור</span>
                <select id="event">
                    <option value="" selected disabled hidden>אירועים</option>
                    @foreach (EventType eventType in Model.EventTypes)
                    {
                        <option value="@eventType.id">@eventType.EventTypeName</option>
                    }
                </select>

                <label for="guests">מוזמנים</label>
                <span class="span" id="errorGuests">צריך לכתוב רק ספרות</span>
                <span class="span" id="emptyGuests">צריך למלא</span>
                <input type="text" id="Guests" placeholder="מספר המוזמנים..." value=""><br><br>

                <label for="calendar">תאריך</label>
                <span class="span" id="emptyDate">צריך לבחור</span>
                <div class="calendar">

                    <div class="year">
                        <label for="year" id="year-date">שנה:</label>
                        <select class="date" id="year" onchange="SelectYear()">
                            <option selected disabled hidden>שנה</option>
                            <option id="year1"></option>
                            <option id="year2"></option>
                            <option id="year3"></option>
                        </select>
                        <script>
                            date = new Date();
                            year = date.getFullYear();
                            document.getElementById("year1").innerHTML = year;
                            document.getElementById("year2").innerHTML = year + 1;
                            document.getElementById("year3").innerHTML = year + 2;
                        </script>
                    </div>


                    <div class="hidden" id="current-month-date">
                        <label for="month">חודש:</label>
                        <select class="date" id="current-month" onchange="SelectMonth()">
                            <option selected disabled hidden>חודש</option>
                            @for (int i = month; i < 13; i++)
                            {
                                <option>@i</option>
                            }
                        </select>
                    </div>

                    <div class="hidden" id="other-month-date">
                        <label for="month">חודש:</label>
                        <select class="date" id="other-month" onchange="SelectMonth()">
                            <option selected disabled hidden>חודש</option>
                            @for (int i = 1; i < 13; i++)
                            {
                                <option>@i</option>
                            }
                        </select>
                    </div>


                    <div class="hidden" id="current-day-date">
                        <label for="day">יום:</label>
                        <select class="date" id="day">
                            <option selected disabled hidden>יום</option>
                            @for (int i = day; i < currentLastDay + 1; i++)
                            {
                                <option>@i</option>
                            }
                        </select>
                    </div>

                    <div class="hidden" id="short-day-date">
                        <label for="day">יום:</label>
                        <select class="date" id="day">
                            <option selected disabled hidden>יום</option>
                            @for (int i = 1; i < 31; i++)
                            {
                                <option>@i</option>
                            }
                        </select>
                    </div>

                    <div class="hidden" id="long-day-date">
                        <label for="day">יום:</label>
                        <select class="date" id="day">
                            <option selected disabled hidden>יום</option>
                            @for (int i = 1; i < 32; i++)
                            {
                                <option>@i</option>
                            }
                        </select>
                    </div>

                    <div class="hidden" id="feb-day-date">
                        <label for="day">יום:</label>
                        <select class="date" id="day">
                            <option selected disabled hidden>יום</option>
                            @for (int i = 1; i < 29; i++)
                            {
                                <option>@i</option>
                            }
                        </select>
                    </div>

                </div><br>


                <label for="order">הערות</label>
                <textarea id="order" placeholder="אם יש משהו שאנחנו צריכים לדעת..."></textarea>
            }
            else
            {
                <label for="name">שם</label>
                <span class="span" id="errorName">צריך לכתוב רק אותיות</span>
                <span class="span" id="emptyName">צריך למלא</span>
                <input type="text" id="name" placeholder="השם שלך..." value="@user.FirstName @user.LastName">

                <label for="tel">טלפון</label>
                <span class="span" id="errorTel">צריך לכתוב לפי התבנית</span>
                <span class="span" id="emptyTel">צריך למלא</span>
                <input type="tel" id="tel" placeholder="הטלפון שלך..." value="@user.PhoneNumber">
                <small>תבנית: 05X-XXX-XXXX, לא צריך את ה"-"</small><br><br>

                <label for="event">סוג האירוע</label>
                <span class="span" id="emptyEvent">צריך לבחור</span>
                <select id="event">
                    <option value="" selected disabled hidden>אירועים</option>
                    @foreach (EventType eventType in Model.EventTypes)
                    {
                        <option value="@eventType.id">@eventType.EventTypeName</option>
                    }
                </select><br><br>

                <label for="guests">מוזמנים</label>
                <span class="span" id="errorGuests">צריך לכתוב רק ספרות</span>
                <span class="span" id="emptyGuests">צריך למלא</span>
                <input type="text" id="Guests" placeholder="מספר המוזמנים..." value=""><br><br>

                <label for="calendar">תאריך</label>
                <span class="span" id="emptyDate">צריך לבחור</span>
                <div class="calendar">

                    <div class="year">
                        <label for="year" id="year-date">שנה:</label>
                        <select class="date" id="year" onchange="SelectYear()">
                            <option selected disabled hidden>שנה</option>
                            <option id="year1"></option>
                            <option id="year2"></option>
                            <option id="year3"></option>
                        </select>
                        <script>
                            date = new Date();
                            year = date.getFullYear();
                            document.getElementById("year1").innerHTML = year;
                            document.getElementById("year2").innerHTML = year + 1;
                            document.getElementById("year3").innerHTML = year + 2;
                        </script>
                    </div>


                    <div class="hidden" id="current-month-date">
                        <label for="month">חודש:</label>
                        <select class="date" id="current-month" onchange="SelectMonth()">
                            <option selected disabled hidden>חודש</option>
                            @for (int i = month; i < 13; i++)
                            {
                                <option>@i</option>
                            }
                        </select>
                    </div>

                    <div class="hidden" id="other-month-date">
                        <label for="month">חודש:</label>
                        <select class="date" id="other-month" onchange="SelectMonth()">
                            <option selected disabled hidden>חודש</option>
                            @for (int i = 1; i < 13; i++)
                            {
                                <option>@i</option>
                            }
                        </select>
                    </div>


                    <div class="hidden" id="current-day-date">
                        <label for="day">יום:</label>
                        <select class="date" id="day">
                            <option selected disabled hidden>יום</option>
                            @for (int i = day; i < currentLastDay + 1; i++)
                            {
                                <option>@i</option>
                            }
                        </select>
                    </div>

                    <div class="hidden" id="short-day-date">
                        <label for="day">יום:</label>
                        <select class="date" id="day">
                            <option selected disabled hidden>יום</option>
                            @for (int i = 1; i < 31; i++)
                            {
                                <option>@i</option>
                            }
                        </select>
                    </div>

                    <div class="hidden" id="long-day-date">
                        <label for="day">יום:</label>
                        <select class="date" id="day">
                            <option selected disabled hidden>יום</option>
                            @for (int i = 1; i < 32; i++)
                            {
                                <option>@i</option>
                            }
                        </select>
                    </div>

                    <div class="hidden" id="feb-day-date">
                        <label for="day">יום:</label>
                        <select class="date" id="day">
                            <option selected disabled hidden>יום</option>
                            @for (int i = 1; i < 29; i++)
                            {
                                <option>@i</option>
                            }
                        </select>
                    </div>

                </div><br>

                <label for="order">הערות</label>
                <textarea id="order" placeholder="אם יש משהו שאנחנו צריכים לדעת..."></textarea>

                <input type="button" class="eventBtn" onclick="checkRequest()" value="שליחה">
            }
        </form>
    </div>
</div>